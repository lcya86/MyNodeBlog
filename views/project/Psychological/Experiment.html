<DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Experiment</title>
  <link rel="stylesheet" type="text/css" href="/stylesheets/spinner.css">
</head>
<style type="text/css">
  .container{
    width: 100%;
    text-align: center;
  }
  @font-face{
    font-family:'Glyphicons Halflings';
    src:url('/fonts/glyphicons-halflings-regular.eot');
    src:url('/fonts/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'),
    url('/fonts/glyphicons-halflings-regular.woff') format('woff'),
    url('/fonts/glyphicons-halflings-regular.ttf') format('truetype'),
    url('/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg')
  }
  .glyphicon{
    position:relative;
    top:1px;
    display:inline-block;
    font-family:'Glyphicons Halflings';
    -webkit-font-smoothing:antialiased;
    font-style:normal;
    font-weight:normal;
    font-size: 20px;
    line-height:1;
    -moz-osx-font-smoothing:grayscale
  }
  .glyphicon-plus:before{
    content:"\2b"
  }
  .cross{
    position: fixed;
    top:45%;
    left:50%;
  }

  .d_login{
    position: fixed;
    top:45%;
    left:40%;
  }

  .upside{
    position: fixed;
    top: 0px;
    width: 100%;
    text-align: center;
  }
  .downside{
    position: fixed;
    top: 50%;
    width: 100%;
    text-align: center;
  }

</style>
<body>
  <div class="spinner">
    <div class="rect1"></div>
    <div class="rect2"></div>
    <div class="rect3"></div>
    <div class="rect4"></div>
    <div class="rect5"></div>
    <div class="rect6"></div>
    <div class="rect7"></div>
    <div class="rect8"></div>
    <div class="rect9"></div>
    <div class="rect10"></div>
    <div class="rect11"></div>
    <div class="rect12"></div>
  </div>
  <div class="container" style="display:none;">
    <div class="d_login">
      请输入姓名
      <input type="text"/>
      <a href="" class="b_login">确定</a>
    </div>
    
    <div class="d_experiment">
      <div class="upside">
        图       
      </div>
      <div class="downside">
        图
      </div>
    </div>
  </div>
  <div class="cross" style="display:none;">
    <span class="glyphicon glyphicon-plus">
  </div>
  <div class="imgList" style="display:none;">
    <%if(material){%>
      <%material.forEach(function(item,index,array){%>
        <img src="<%=item.content%>" alt="" class="upsideimg<%=index%>">
      <%});%>
    <%}%>
  </div>
</body>
<script type="text/javascript" src="/javascripts/jquery-1.11.0.min.js"></script>
<script type="text/javascript">
  $(function(){
    $('div.spinner').remove();
    $('div.container').show();
    var $cross = $('div.cross');
    var $upside = $('div.upside');
    var $downside = $('div.downside');
    var reactive = false;
    var miss = true;
    var up = false;
    var E = false;
    var count = 0;
    $upside.hide();
    $downside.hide();

    $('a.b_login').click(function(event){
      event.preventDefault();
      $('div.d_login').hide();
      start();
    });

    function start(){
      if(count<10){
        reactive = false;
        $cross.show();
        $upside.empty();
        $upside.append($('img.upsideimg'+count));
        $downside.empty();
        $downside.append($('img.upsideimg'+count));
        $upside.hide();
        $downside.hide();
        up = Math.floor((Math.random()*10))%2==0;
        E = Math.floor((Math.random()*10))%2==0;
        setTimeout(function(){
          $cross.hide();
          $upside.show();
          $downside.show();
        },500);
        setTimeout(function(){
          reactive = true;
          if(up){
            if(E){
              $upside.html('<span>E</span>');
            }else{
              $upside.html('<span>F</span>');
            }
            $downside.html('');
          }else{
            if(E){
              $downside.html('<span>E</span>');
            }else{
              $downside.html('<span>F</span>');
            }
            $upside.html('');
          }
        },1000);
        setTimeout(function(){
          if(miss){
            start();
          }
        },2000); 
        count++;
      }else{
        alert('finish');
      }
    }

    $(document).keydown(function(event){
      if(reactive){
        if ( event.which == 69 ) {
          if(E){
            miss = false;
            start()
          }else{
            miss = true;
          }
          if(miss==true){
            alert(miss);
          }
        }else if(event.which == 70){
          if(E){
            miss = true;
          }else{
            miss = false;
            start()
          }
          if(miss==true){
            alert(miss);
          }
        }
      }
    });

  });
</script>
</html>