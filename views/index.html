<%include header.html%>
	<%include navbar.html%>
	<div class="container">
		<div class="row">
			<div class="col-xs-12 col-sm-12 col-md-3 col-md-offset-9">
				<div class="bs-sidebar affix">
					<ul class="nav">
						<%if(posts){%>
							<%posts.forEach(function(post){%>
								<li><a class="sidebar_a" onclick="scroll('<%=post.title%>')"><%=post.title%></a></li>
							<%})%>
						<%}%>
					</ul>
				</div>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-9" id="posts">
				<%if(!posts){%>
					<h2>主人很懒，什么都没有留下。。。</h2>
				<%}else{%>
					<%posts.forEach(function(post){%>
						<div class="col-xs-12 post">
							<article class="col-xs-12 article" id="<%=post.title%>">
								<%=post.body%>
							</article>
							<hr>
							<div class="col-xs-12">
								<small><em>post at <%=post.update.getFullYear()%>-<%=post.update.getMonth()%>-<%=post.update.getDate()%></em>
								</small>
								<%if(user){%>
								<div class="pull-right">
									<a style="color:#555" href=""><span class="glyphicon glyphicon-pencil"></span></a>
									&nbsp;&nbsp;&nbsp;&nbsp;
									<a style="color:#555" onclick="remove('<%=post.title%>')"><span class="glyphicon glyphicon-remove"></span></a>
								</div>
								<script type="text/javascript">
									function removePost(id){

									}

									function editPost(id){

									}
								</script>
								<%}%>
							</div>
						</div>
					<%})%>
				<%}%>
			</div>
			
		</div>
	</div>
	<%include footer.html%>
	<%include otherscript.html%>
	<script type="text/javascript">
	  $(document).ready(function(){
	  	var converter = new Showdown.converter({ extensions: ['github','prettify','table'] });
			$(".article").html(function(i){
				return converter.makeHtml($(".article:eq("+i+")").text());
			});	
			prettyPrint();
	  });
	</script>
	<script type="text/javascript">
		function getElementTop(element){
　　　　var actualTop = element.offsetTop;
　　　　var current = element.offsetParent;
　　　　while (current !== null){
　　　　　　actualTop += current.offsetTop;
　　　　　　current = current.offsetParent;
　　　　}
　　　　return actualTop;
　　}

		function scroll(id){
			var top = getElementTop(document.getElementById(id))-128;
			console.log(top);
			$("html").animate({scrollTop:top},120);
			$("body").animate({scrollTop:top},120);
		}
	</script>
