{"version":3,"sources":["../../src/pages/message/detail/detail.module.ts","webpack:///./src/service/message.ts?df89","../../src/pages/message/detail/detail.ts"],"names":[],"mappings":"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","file":"14.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MessageDetail } from './detail';\n\n@NgModule({\n  declarations: [\n    MessageDetail,\n  ],\n  imports: [\n    IonicPageModule.forChild(MessageDetail),\n  ],\n  exports: [\n    MessageDetail\n  ]\n})\nexport class MessageDetailModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/message/detail/detail.module.ts","import { Injectable } from '@angular/core';\nimport { Http, Response, URLSearchParams } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/map';\nimport { Message } from '../models/message';\nimport { Setting } from '../app/app.setting';\n\n/*\n  Generated class for the Message provider.\n\n  See https://angular.io/docs/ts/latest/guide/dependency-injection.html\n  for more info on providers and Angular 2 DI.\n*/\n@Injectable()\nexport class MessageService {\n  private messageUrl = this.setting.apihost + '/homepage';\n  private detailUrl = this.setting.apihost + '/homeMsgContent';\n\n  constructor(public http: Http, private setting: Setting) {\n    //console.log('Hello Message Provider');\n  }\n\n  getMessageList(): Observable<Message[]> {//获取首页json并解析出消息\n    let params = new URLSearchParams();\n    //params.set('callback', 'JSONP_CALLBACK');\n    params.set('Parmeters', '{\"InputData\":[{\"APIName\":\"homepage\",\"Parameters\":[{\"imei\":\"12365478912345\",\"userId\":\"1367197261\"}]}]}');\n    return this.http.get(this.messageUrl, { search: params })\n      .map(res => res.json().OutputData.Data.filter(item => item.modType === 'Info')[0].msgData || [])\n      .catch(this.handleError);\n  }\n\n  getMessageContent(msgId: number): Observable<string> {//根据msgId获取消息内容\n    let params = new URLSearchParams();\n    //params.set('callback', 'JSONP_CALLBACK');\n    params.set('Parmeters', '{\"InputData\":[{\"APIName\":\"homeMsgContent\",\"Parameters\":[{\"msgId\":\"' + msgId + '\",\"imei\":\"966cd7fc994ebbce6c29ea61b651cb6e59aa7e872381bf88ee309e4824dc465a\",\"userId\":\"\"}]}]}');\n    return this.http.get(this.detailUrl, { search: params })\n      .map(res => res.json().OutputData.msgCon || '')\n      .catch(this.handleError);\n  }\n\n  private handleError(error: Response | any) {\n    // In a real world app, we might use a remote logging infrastructure\n    let errMsg: string;\n    if (error instanceof Response) {\n      const body = error.json() || '';\n      const err = body.error || JSON.stringify(body);\n      errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n    } else {\n      errMsg = error.message ? error.message : error.toString();\n    }\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/message.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController } from 'ionic-angular';\nimport { Message } from '../../../models/message';\nimport { MessageService } from '../../../service/message';\n/*\n  Generated class for the Detail page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-detail',\n  templateUrl: 'detail.html',\n  providers: [MessageService]\n})\nexport class MessageDetail {\n\n  msg: Message;\n  errMsg: string;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public msgService: MessageService, public loadingCtrl: LoadingController) {\n    this.msg = this.navParams.get('msg');\n  }\n\n  ngAfterViewInit() {\n    if (!this.msg.msgCon) {\n      let loading = this.loadingCtrl.create();\n      loading.present();\n      this.msgService.getMessageContent(this.msg.msgId).subscribe(msg => this.msg.msgCon = msg, err => this.errMsg = err, () => { loading.dismiss() });\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/message/detail/detail.ts"],"sourceRoot":""}