{"version":3,"sources":["../../src/pages/user/login/login.module.ts","webpack:///./src/models/user.ts?9789*","webpack:///./src/service/user.ts?641b","../../src/pages/user/login/login.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACZ;AAapC,IAAa,eAAe;IAA5B;IAA+B,CAAC;IAAD,sBAAC;AAAD,CAAC;AAAnB,eAAe;IAX3B,sFAAQ,CAAC;QACR,YAAY,EAAE;YACZ,yDAAS;SACV;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;SACpC;QACD,OAAO,EAAE;YACP,yDAAS;SACV;KACF,CAAC;GACW,eAAe,CAAI;AAAJ;;;;;;;;;ACf5B;AAAA;IAAA;IAIA,CAAC;IAAD,WAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJ0C;AACG;AAC2C;AAC5C;AACZ;AACF;AACO;AACO;AAE7C;;;;;EAKE;AAEF,IAAa,WAAW;IAKtB,qBAAmB,IAAU,EAAU,OAAgB,EAAU,MAAc;QAA5D,SAAI,GAAJ,IAAI,CAAM;QAAU,YAAO,GAAP,OAAO,CAAS;QAAU,WAAM,GAAN,MAAM,CAAQ;QAHvE,aAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,0BAA0B,CAAC;QACjE,cAAS,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,2BAA2B,CAAC;IAG3E,CAAC;IAED,2BAAK,GAAL,UAAM,QAAgB,EAAE,SAAiB;QACvC,IAAI,MAAM,GAAG,IAAI,sEAAe,EAAE,CAAC;QACnC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC;QAC5C,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;QACjC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QACnC,IAAI,OAAO,GAAG,IAAI,qEAAc,CAAC;YAC/B,MAAM,EAAE,MAAM;YACd,OAAO,EAAE,IAAI,8DAAO,EAAE;SACvB,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC;aACzC,GAAG,CAAC,UAAC,GAAG;YACP,IAAI,QAAQ,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;YAC1B,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;gBACpB,IAAI,IAAI,GAAG,IAAI,0DAAI,EAAE,CAAC;gBACtB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACvC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACvC,MAAM,CAAC,IAAI,CAAC;YACd,CAAC;YACD,MAAM,CAAC,SAAS,CAAC;QACnB,CAAC,CAAC;aACD,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC7B,CAAC;IAED,4BAAM,GAAN,UAAO,QAAgB;QACrB,IAAI,MAAM,GAAG,IAAI,sEAAe,EAAE,CAAC;QACnC,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC;QAC5C,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;QACjC,IAAI,OAAO,GAAG,IAAI,qEAAc,CAAC;YAC/B,MAAM,EAAE,MAAM;YACd,OAAO,EAAE,IAAI,8DAAO,EAAE;SACvB,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC;aAC1C,GAAG,CAAC,UAAC,GAAG;YACP,IAAI,QAAQ,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC;YAC1B,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;QACzB,CAAC,CAAC;aACD,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAC7B,CAAC;IAEO,iCAAW,GAAnB,UAAoB,KAAqB;QACvC,oEAAoE;QACpE,IAAI,MAAc,CAAC;QACnB,EAAE,CAAC,CAAC,KAAK,YAAY,+DAAQ,CAAC,CAAC,CAAC;YAC9B,IAAM,IAAI,GAAG,KAAK,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC;YAChC,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAC/C,MAAM,GAAM,KAAK,CAAC,MAAM,YAAM,KAAK,CAAC,UAAU,IAAI,EAAE,UAAI,GAAK,CAAC;QAChE,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,GAAG,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC5D,CAAC;QACD,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QACtB,MAAM,CAAC,2DAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAEH,kBAAC;AAAD,CAAC;AA7DY,WAAW;IADvB,wFAAU,EAAE;qCAMc,2DAAI,EAAmB,iEAAO,EAAkB,oEAAM;GALpE,WAAW,CA6DvB;AA7DuB;;;;;;;;;;;;;;;;;;;;;;;AChBkB;AAC2C;AAC9B;AACH;AACpD;;;;;EAKE;AAOF,IAAa,SAAS;IAIpB,mBAAmB,OAAsB,EAAS,SAAoB,EAAU,QAAkB,EAAU,WAAwB,EAAS,OAAwB;QAAlJ,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAU,aAAQ,GAAR,QAAQ,CAAU;QAAU,gBAAW,GAAX,WAAW,CAAa;QAAS,YAAO,GAAP,OAAO,CAAiB;IAAI,CAAC;IAE1K,kCAAc,GAAd;IAEA,CAAC;IACD,qCAAiB,GAAjB;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IACpC,CAAC;IACD,2BAAO,GAAP;QAAA,iBAiBC;QAhBC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,SAAS,CAAC,UAAC,IAAI;YACnE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,IAAI,CAAC,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC;gBAChC,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;gBAChC,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;YACrB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC;oBAClB,OAAO,EAAE,kBAAkB;oBAC3B,QAAQ,EAAE,KAAK;oBACf,QAAQ,EAAE,IAAI;oBACd,mBAAmB,EAAE,IAAI;iBAC1B,CAAC,CAAC,OAAO,EAAE,CAAC;YACf,CAAC;QACH,CAAC,CAAC;IAGJ,CAAC;IACH,gBAAC;AAAD,CAAC;AA9BY,SAAS;IANrB,uFAAS,EAAE;IACX,wFAAS,CAAC;QACT,QAAQ,EAAE,YAAY;QACtB,WAAW,mEAAE,CAAY;OACD;KACzB,CAAC;cAKqK;AA0BtK;SA9BY,SAAS,e","file":"8.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n  exports: [\n    LoginPage\n  ]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user/login/login.module.ts","export class User {\n  nickName: string;\n  mbrPasswd: string;\n  memberId: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/user.ts","import { Injectable } from '@angular/core';\nimport { Device } from '@ionic-native/device';\nimport { Http, Response, URLSearchParams, RequestOptions, Headers } from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/map';\nimport { User } from '../models/user';\nimport { Setting } from '../app/app.setting';\n\n/*\n  Generated class for the Login provider.\n\n  See https://angular.io/docs/ts/latest/guide/dependency-injection.html\n  for more info on providers and Angular 2 DI.\n*/\n@Injectable()\nexport class UserService {\n\n  private loginUrl = this.setting.apiTestHost + '/artradeApp/login.action';\n  private logoutUrl = this.setting.apiTestHost + '/artradeApp/logout.action';\n\n  constructor(public http: Http, private setting: Setting, private device: Device) {\n  }\n\n  login(nickName: string, mbrPasswd: string): Observable<User> {//根据专场id获取拍品列表\n    let params = new URLSearchParams();\n    params.set('imei', this.device.uuid || '0');\n    params.set('nickName', nickName);\n    params.set('mbrPasswd', mbrPasswd);\n    let options = new RequestOptions({\n      params: params,\n      headers: new Headers()\n    });\n    return this.http.get(this.loginUrl, options)\n      .map((res) => {\n        let response = res.json();\n        if (response.result) {\n          let user = new User();\n          user.nickName = response.data.nickName;\n          user.memberId = response.data.memberId;\n          return user;\n        }\n        return undefined;\n      })\n      .catch(this.handleError);\n  }\n\n  logout(nickName: string): Observable<Boolean> {\n    let params = new URLSearchParams();\n    params.set('imei', this.device.uuid || '0');\n    params.set('nickName', nickName);\n    let options = new RequestOptions({\n      params: params,\n      headers: new Headers()\n    });\n    return this.http.get(this.logoutUrl, options)\n      .map((res) => {\n        let response = res.json();\n        return response.result;\n      })\n      .catch(this.handleError);\n  }\n\n  private handleError(error: Response | any) {\n    // In a real world app, we might use a remote logging infrastructure\n    let errMsg: string;\n    if (error instanceof Response) {\n      const body = error.json() || '';\n      const err = body.error || JSON.stringify(body);\n      errMsg = `${error.status} - ${error.statusText || ''} ${err}`;\n    } else {\n      errMsg = error.message ? error.message : error.toString();\n    }\n    console.error(errMsg);\n    return Observable.throw(errMsg);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/service/user.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController } from 'ionic-angular';\nimport { Storages } from '../../../providers/storages';\nimport { UserService } from '../../../service/user';\n/*\n  Generated class for the Login page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n  providers: [UserService]\n})\nexport class LoginPage {\n\n  nickName: string;\n  mbrPasswd: string;\n  constructor(public navCtrl: NavController, public navParams: NavParams, private storages: Storages, private userService: UserService, public toaCtrl: ToastController) { }\n\n  ionViewDidLoad() {\n\n  }\n  enterRegisterPage() {\n    this.navCtrl.push('RegisterPage');\n  }\n  doLogin() {\n    this.userService.login(this.nickName, this.mbrPasswd).subscribe((user) => {\n      if (user) {\n        user.mbrPasswd = this.mbrPasswd;\n        this.storages.set('User', user);\n        this.navCtrl.pop();\n      } else {\n        this.toaCtrl.create({\n          message: '用户名或密码不正确，请重新登录！',\n          position: 'top',\n          duration: 1500,\n          dismissOnPageChange: true\n        }).present();\n      }\n    })\n\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user/login/login.ts"],"sourceRoot":""}